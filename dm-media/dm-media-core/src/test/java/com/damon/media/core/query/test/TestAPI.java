package com.damon.media.core.query.test;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class TestAPI {

    @Test
    public void testSnowflake() {
//        DomainRegistry domainRegistry = DomainRegistry.instance();
//
//        Computer computer = domainRegistry.create(Computer.class, 1L);
//
//        Cpu cpu100 = domainRegistry.create(Cpu.class, 100L);
//        cpu100.save();
//
//        Cpu cpu200 = domainRegistry.create(Cpu.class, 200L);
//        cpu200.save();
//
//        computer.setCpuId(100L);
//        Cpu actual = computer.cpu.instance();
//        assertEquals(cpu100, actual);
//
//        computer.setCpuId(200L);
//        actual = computer.cpu.instance();
//        assertEquals(cpu100, actual);
//
//        computer.cpu.clear();
//        actual = computer.cpu.instance();
//        assertNotEquals(cpu100, actual);
//        assertEquals(cpu200, actual);

    }
}
